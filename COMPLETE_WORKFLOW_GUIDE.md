# ðŸŽ¯ å®Œæ•´å·¥ä½œæµç¨‹æŒ‡å—ï¼ˆå«å›žæµ‹ï¼‰

## ðŸ“‹ å®Œæ•´æµç¨‹æ¦‚è§ˆ

```
1. æ•°æ®å‡†å¤‡
   â”œâ”€ æ›´æ–°è´¢åŠ¡æ•°æ®
   â””â”€ æ›´æ–°æ—¥çº¿æ•°æ®
   
2. ç­–ç•¥ä¿¡å·ç”Ÿæˆ
   â””â”€ ä¸ºåŽ†å²æ•°æ®æ·»åŠ ä¹°å–ä¿¡å·
   
3. ç­–ç•¥å›žæµ‹
   â”œâ”€ è¿è¡Œå›žæµ‹
   â”œâ”€ ç”ŸæˆæŠ¥å‘Š
   â””â”€ å¯è§†åŒ–ç»“æžœ
   
4. å®žæ—¶é€‰è‚¡
   â””â”€ èŽ·å–å½“å‰ä¹°å…¥ä¿¡å·
```

## ðŸš€ ä¸€é”®è¿è¡Œï¼ˆæŽ¨èï¼‰

### ä½¿ç”¨å®Œæ•´æµç¨‹è„šæœ¬

```bash
# æ¿€æ´»çŽ¯å¢ƒ
conda activate stock-analysis

# è¿è¡Œå®Œæ•´æµç¨‹
python run_full_pipeline.py
```

**ä¸‰ç§æ¨¡å¼:**
- **[1] å®Œæ•´æ¨¡å¼** - é‡æ–°ç”Ÿæˆæ‰€æœ‰æ•°æ®ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
- **[2] å¿«é€Ÿæ¨¡å¼** - åªæ›´æ–°å¢žé‡æ•°æ®ï¼ˆæ—¥å¸¸ä½¿ç”¨ï¼‰
- **[3] ä»…å›žæµ‹** - è·³è¿‡æ•°æ®æ›´æ–°ï¼Œç›´æŽ¥å›žæµ‹

## ðŸ“ æ‰‹åŠ¨æ‰§è¡Œæ­¥éª¤

å¦‚æžœä½ æƒ³æ‰‹åŠ¨æŽ§åˆ¶æ¯ä¸€æ­¥ï¼š

### æ­¥éª¤1: æ•°æ®å‡†å¤‡

```bash
# 1.1 æ›´æ–°è´¢åŠ¡æ•°æ®
python readTDX_cw.py

# 1.2 æ›´æ–°æ—¥çº¿æ•°æ®
python readTDX_lday.py
```

**è€—æ—¶**: é¦–æ¬¡çº¦1-2å°æ—¶ï¼ŒåŽç»­5-10åˆ†é’Ÿ

### æ­¥éª¤2: ç”Ÿæˆç­–ç•¥ä¿¡å·

```bash
# ä¸ºæ‰€æœ‰è‚¡ç¥¨åŽ†å²æ•°æ®æ·»åŠ ä¹°å–ä¿¡å·
python celue_save.py

# å¦‚æžœä¿®æ”¹äº†ç­–ç•¥ï¼Œéœ€è¦é‡æ–°ç”Ÿæˆ
python celue_save.py del
```

**é‡è¦**: 
- è¿™ä¸€æ­¥ä¼šç”Ÿæˆ `celueæ±‡æ€».csv` æ–‡ä»¶
- è¯¥æ–‡ä»¶æ˜¯å›žæµ‹çš„æ•°æ®æº
- è€—æ—¶: 10-30åˆ†é’Ÿ

### æ­¥éª¤3: è¿è¡Œå›žæµ‹

```bash
# ä½¿ç”¨RQAlphaè¿›è¡Œç­–ç•¥å›žæµ‹
python huice.py
```

**å›žæµ‹å‚æ•°**ï¼ˆåœ¨ `huice.py` ä¸­ä¿®æ”¹ï¼‰:
```python
start_date = "2013-01-01"  # å›žæµ‹èµ·å§‹æ—¥æœŸ
end_date = "2022-12-31"    # å›žæµ‹ç»“æŸæ—¥æœŸ
stock_money = 10000000     # åˆå§‹èµ„é‡‘ï¼ˆ1000ä¸‡ï¼‰
order_type = 'order_target_value'  # ä¸‹å•æ¨¡å¼
xiadan_target_value = 100000  # æ¯åªè‚¡ç¥¨ä¹°å…¥10ä¸‡
```

### æ­¥éª¤4: æŸ¥çœ‹å›žæµ‹ç»“æžœ

```bash
# ä½¿ç”¨ç»“æžœæŸ¥çœ‹å™¨
python view_backtest_results.py

# æˆ–æŸ¥çœ‹å¯è§†åŒ–å›¾è¡¨
python plot.py
# ç„¶åŽåœ¨æµè§ˆå™¨æ‰“å¼€ pyecharts.html
```

### æ­¥éª¤5: è¿è¡Œé€‰è‚¡

```bash
# èŽ·å–å½“å‰æœ€æ–°çš„ä¹°å…¥ä¿¡å·
python xuangu.py
```

## ðŸ“Š å›žæµ‹ç»“æžœè¯´æ˜Ž

### å›žæµ‹è¾“å‡ºæ–‡ä»¶

è¿è¡Œå›žæµ‹åŽï¼Œä¼šåœ¨ `rq_result/` ç›®å½•ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

```
rq_result/
â”œâ”€â”€ 2024-12-30_143025+start_date2013-01-01+order_target_value_100000.pkl
â””â”€â”€ 2024-12-30_143025+start_date2013-01-01+order_target_value_100000.png
```

### å…³é”®æŒ‡æ ‡è§£è¯»

| æŒ‡æ ‡ | è¯´æ˜Ž | å¥½çš„æ ‡å‡† |
|------|------|----------|
| **æ€»æ”¶ç›ŠçŽ‡** | æ•´ä¸ªå›žæµ‹æœŸé—´çš„æ€»æ”¶ç›Š | >20% |
| **å¹´åŒ–æ”¶ç›ŠçŽ‡** | æŠ˜ç®—æˆæ¯å¹´çš„æ”¶ç›ŠçŽ‡ | >10% |
| **æœ€å¤§å›žæ’¤** | æœ€å¤§çš„äºæŸå¹…åº¦ | >-20% |
| **å¤æ™®æ¯”çŽ‡** | é£Žé™©è°ƒæ•´åŽçš„æ”¶ç›Š | >1.0 |
| **Alpha** | ç›¸å¯¹åŸºå‡†çš„è¶…é¢æ”¶ç›Š | >0 |
| **èƒœçŽ‡** | ç›ˆåˆ©äº¤æ˜“å æ¯” | >50% |

### æŸ¥çœ‹å›žæµ‹ç»“æžœ

**æ–¹å¼1: ä½¿ç”¨æŸ¥çœ‹å™¨**ï¼ˆæŽ¨èï¼‰
```bash
python view_backtest_results.py
```

ä¼šæ˜¾ç¤ºï¼š
- å›žæµ‹æ‘˜è¦
- æ”¶ç›ŠæŒ‡æ ‡
- é£Žé™©æŒ‡æ ‡
- äº¤æ˜“æ˜Žç»†
- ç­–ç•¥è¯„ä»·

**æ–¹å¼2: æŸ¥çœ‹å›¾è¡¨**
```bash
# ç”ŸæˆKçº¿å›¾ä¸Šçš„ä¹°å–ç‚¹
python plot.py

# æµè§ˆå™¨æ‰“å¼€
start pyecharts.html
```

**æ–¹å¼3: æŸ¥çœ‹åŽŸå§‹æ•°æ®**
```python
import pickle
import pandas as pd

# åŠ è½½ç»“æžœ
with open('rq_result/æœ€æ–°çš„pklæ–‡ä»¶', 'rb') as f:
    result = pickle.load(f)

# æŸ¥çœ‹æ‘˜è¦
print(result['summary'])

# æŸ¥çœ‹äº¤æ˜“è®°å½•
print(result['trades'])

# æŸ¥çœ‹æŒä»“è®°å½•
print(result['stock_positions'])
```

## âš™ï¸ å›žæµ‹å‚æ•°ä¼˜åŒ–

### ä¿®æ”¹å›žæµ‹æ—¶é—´èŒƒå›´

ç¼–è¾‘ `huice.py`:
```python
start_date = "2018-01-01"  # æ”¹ä¸ºä½ æƒ³æµ‹è¯•çš„èµ·å§‹æ—¥æœŸ
end_date = "2023-12-31"    # æ”¹ä¸ºä½ æƒ³æµ‹è¯•çš„ç»“æŸæ—¥æœŸ
```

### ä¿®æ”¹èµ„é‡‘é…ç½®

```python
stock_money = 1000000  # åˆå§‹èµ„é‡‘ï¼ˆ100ä¸‡ï¼‰

# æ–¹å¼1: æŒ‰æ¯”ä¾‹ä¹°å…¥
order_type = 'order_percent'
xiadan_percent = 0.1  # æ¯æ¬¡ä¹°å…¥10%çš„èµ„é‡‘

# æ–¹å¼2: å›ºå®šé‡‘é¢ä¹°å…¥
order_type = 'order_target_value'
xiadan_target_value = 50000  # æ¯åªè‚¡ç¥¨ä¹°å…¥5ä¸‡
```

### ä¿®æ”¹åŸºå‡†æŒ‡æ•°

```python
__config__ = {
    "mod": {
        "sys_analyser": {
            "benchmark": "000300.XSHG",  # æ²ªæ·±300
            # æˆ–æ”¹ä¸º
            # "benchmark": "000905.XSHG",  # ä¸­è¯500
            # "benchmark": "000016.XSHG",  # ä¸Šè¯50
        }
    }
}
```

## ðŸŽ“ å·¥ä½œæµç¨‹ç¤ºä¾‹

### é¦–æ¬¡å®Œæ•´è¿è¡Œ

```bash
# 1. ä¸€é”®è¿è¡Œå®Œæ•´æµç¨‹
python run_full_pipeline.py
# é€‰æ‹©: [1] å®Œæ•´æ¨¡å¼

# ç­‰å¾…å®ŒæˆåŽ...

# 2. æŸ¥çœ‹å›žæµ‹ç»“æžœ
python view_backtest_results.py

# 3. æŸ¥çœ‹å¯è§†åŒ–
start pyecharts.html
```

### æ—¥å¸¸ä½¿ç”¨æµç¨‹

**æ¯å¤©16:00åŽ:**

```bash
# æ–¹å¼1: ä½¿ç”¨å®Œæ•´æµç¨‹ï¼ˆæŽ¨èï¼‰
python run_full_pipeline.py
# é€‰æ‹©: [2] å¿«é€Ÿæ¨¡å¼

# æ–¹å¼2: æ‰‹åŠ¨æ‰§è¡Œ
python readTDX_cw.py      # æ›´æ–°è´¢åŠ¡æ•°æ®
python readTDX_lday.py    # æ›´æ–°æ—¥çº¿æ•°æ®
python celue_save.py      # æ›´æ–°ç­–ç•¥ä¿¡å·
python xuangu.py          # è¿è¡Œé€‰è‚¡
```

### ç­–ç•¥ä¼˜åŒ–æµç¨‹

```bash
# 1. ä¿®æ”¹ç­–ç•¥æ–‡ä»¶ CeLue.py

# 2. é‡æ–°ç”Ÿæˆç­–ç•¥ä¿¡å·
python celue_save.py del

# 3. é‡æ–°å›žæµ‹
python huice.py

# 4. æŸ¥çœ‹ç»“æžœ
python view_backtest_results.py

# 5. å¦‚æžœæ»¡æ„ï¼Œè¿è¡Œé€‰è‚¡
python xuangu.py
```

## â±ï¸ å„æ­¥éª¤è€—æ—¶å‚è€ƒ

| æ­¥éª¤ | é¦–æ¬¡è¿è¡Œ | æ—¥å¸¸æ›´æ–° |
|------|----------|----------|
| æ›´æ–°è´¢åŠ¡æ•°æ® | 10åˆ†é’Ÿ | 3åˆ†é’Ÿ |
| æ›´æ–°æ—¥çº¿æ•°æ® | 1-2å°æ—¶ | 3åˆ†é’Ÿ |
| ç”Ÿæˆç­–ç•¥ä¿¡å· | 20-40åˆ†é’Ÿ | 5-10åˆ†é’Ÿ |
| è¿è¡Œå›žæµ‹ | 5-10åˆ†é’Ÿ | 5-10åˆ†é’Ÿ |
| å¯è§†åŒ–ç»“æžœ | 2åˆ†é’Ÿ | 2åˆ†é’Ÿ |
| è¿è¡Œé€‰è‚¡ | 10åˆ†é’Ÿ | 10åˆ†é’Ÿ |

## ðŸ”§ å¸¸è§é—®é¢˜

### Q1: celueæ±‡æ€».csvæ–‡ä»¶åœ¨å“ªï¼Ÿ

**A**: åœ¨é…ç½®çš„ `csv_gbbq` ç›®å½•ä¸‹ï¼ˆé»˜è®¤ `D:\TDXdata\celueæ±‡æ€».csv`ï¼‰

è¿è¡Œ `celue_save.py` åŽç”Ÿæˆã€‚

### Q2: å›žæµ‹æŠ¥é”™æ‰¾ä¸åˆ°celueæ±‡æ€».csv

**A**: ç¡®ä¿å…ˆè¿è¡Œæ­¥éª¤2ç”Ÿæˆç­–ç•¥ä¿¡å·:
```bash
python celue_save.py
```

### Q3: å›žæµ‹ç»“æžœçš„æ”¶ç›ŠçŽ‡å¾ˆä½Žæ€Žä¹ˆåŠžï¼Ÿ

**A**: ç­–ç•¥ä¼˜åŒ–æ–¹å‘:
1. è°ƒæ•´ä¹°å…¥æ¡ä»¶ï¼ˆæ›´ä¸¥æ ¼æˆ–æ›´å®½æ¾ï¼‰
2. è°ƒæ•´å–å‡ºæ¡ä»¶ï¼ˆæ­¢ç›ˆæ­¢æŸç‚¹ä½ï¼‰
3. å¢žåŠ å¸‚åœºçŽ¯å¢ƒåˆ¤æ–­
4. è°ƒæ•´æŒä»“æ—¶é—´
5. ä¼˜åŒ–èµ„é‡‘ç®¡ç†

### Q4: RQAlphaæ•°æ®åŒ…ä¸‹è½½å¤±è´¥

**A**: æ‰‹åŠ¨ä¸‹è½½:
```bash
rqalpha update-bundle
```

æˆ–è®¿é—®: https://github.com/ricequant/rqalpha

### Q5: å†…å­˜ä¸è¶³å¯¼è‡´ç¨‹åºå´©æºƒ

**A**: 
1. ä½¿ç”¨å•è¿›ç¨‹æ¨¡å¼: `python celue_save.py single`
2. åˆ†æ‰¹å¤„ç†è‚¡ç¥¨
3. å¢žåŠ ç³»ç»Ÿå†…å­˜

## ðŸ’¡ æœ€ä½³å®žè·µ

### 1. é¦–æ¬¡è¿è¡Œå»ºè®®

- ä½¿ç”¨å®Œæ•´æ¨¡å¼è¿è¡Œä¸€æ¬¡
- æ£€æŸ¥æ¯ä¸ªæ­¥éª¤çš„è¾“å‡º
- ç¡®è®¤æ•°æ®æ–‡ä»¶æ­£ç¡®ç”Ÿæˆ
- æŸ¥çœ‹å›žæµ‹ç»“æžœæ˜¯å¦åˆç†

### 2. ç­–ç•¥å¼€å‘å»ºè®®

- å…ˆåœ¨å°‘é‡è‚¡ç¥¨ä¸Šæµ‹è¯•ç­–ç•¥
- ä½¿ç”¨è¾ƒçŸ­çš„å›žæµ‹æ—¶é—´éªŒè¯
- é€æ­¥æ‰©å±•åˆ°å…¨å¸‚åœº
- å¯¹æ¯”å¤šä¸ªæ—¶é—´æ®µçš„è¡¨çŽ°

### 3. å›žæµ‹ç»“æžœåˆ†æž

- ä¸è¦åªçœ‹æ€»æ”¶ç›ŠçŽ‡
- å…³æ³¨æœ€å¤§å›žæ’¤å’Œå¤æ™®æ¯”çŽ‡
- åˆ†æžäº¤æ˜“æ¬¡æ•°å’ŒèƒœçŽ‡
- å¯¹æ¯”åŸºå‡†æŒ‡æ•°è¡¨çŽ°

### 4. å®žç›˜å‰å‡†å¤‡

- å›žæµ‹è‡³å°‘æ¶µç›–3-5å¹´æ•°æ®
- ç»åŽ†è¿‡å®Œæ•´çš„ç‰›ç†Šå‘¨æœŸ
- å¤æ™®æ¯”çŽ‡ > 1.5
- æœ€å¤§å›žæ’¤ < 20%
- å°èµ„é‡‘æ¨¡æ‹Ÿäº¤æ˜“éªŒè¯

## ðŸ“ˆ è¿›é˜¶ä½¿ç”¨

### å¤šç­–ç•¥å¯¹æ¯”

```bash
# 1. åˆ›å»ºä¸åŒçš„ç­–ç•¥æ–‡ä»¶
cp CeLue.py CeLue_v1.py
cp CeLue.py CeLue_v2.py

# 2. åˆ†åˆ«æµ‹è¯•
python celue_save.py  # ä½¿ç”¨CeLue.py
python huice.py

# 3. å¯¹æ¯”ç»“æžœ
python view_backtest_results.py
```

### å‚æ•°ç½‘æ ¼æœç´¢

ä¿®æ”¹ `huice.py`ï¼Œå¾ªçŽ¯æµ‹è¯•ä¸åŒå‚æ•°ç»„åˆï¼š
```python
for target_value in [50000, 100000, 200000]:
    xiadan_target_value = target_value
    # è¿è¡Œå›žæµ‹...
    # è®°å½•ç»“æžœ...
```

## ðŸŽ‰ æˆåŠŸè¿è¡Œæ ‡å¿—

å®Œæ•´æµç¨‹æˆåŠŸè¿è¡ŒåŽï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š

1. âœ… è´¢åŠ¡æ•°æ®æ›´æ–°å®Œæˆ
2. âœ… æ—¥çº¿æ•°æ®æ›´æ–°å®Œæˆ
3. âœ… `celueæ±‡æ€».csv` æ–‡ä»¶ç”Ÿæˆ
4. âœ… å›žæµ‹å®Œæˆï¼Œç”Ÿæˆ `.pkl` å’Œ `.png` æ–‡ä»¶
5. âœ… å¯è§†åŒ–å›¾è¡¨ `pyecharts.html` ç”Ÿæˆ
6. âœ… é€‰è‚¡ç»“æžœè¾“å‡º

## ðŸ“ž èŽ·å–å¸®åŠ©

- æŸ¥çœ‹è¯¦ç»†æ—¥å¿—: `logs/` ç›®å½•
- è¿è¡ŒçŽ¯å¢ƒæ£€æŸ¥: `python check_environment.py`
- æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£: `README.md`, `DEPLOYMENT_GUIDE.md`

---

**çŽ°åœ¨å¼€å§‹å®Œæ•´çš„å›žæµ‹æµç¨‹å§ï¼** ðŸš€

```bash
python run_full_pipeline.py
```
